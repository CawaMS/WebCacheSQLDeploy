{
    "$schema": "http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {},
    "resources": [
        {
            "name": "cawaTestAddedRedis",
            "type": "Microsoft.Cache/redis",
            "apiVersion": "2022-06-01",
            "location": "eastus",
            "dependsOn": [],
            "properties": {
                "sku": {
                    "name": "Standard",
                    "family": "C",
                    "capacity": 1
                },
                "redisConfiguration": {},
                "enableNonSslPort": false,
                "redisVersion": "6",
                "publicNetworkAccess": "Disabled"
            },
            "tags": {}
        },
        {
            "apiVersion": "2017-05-10",
            "type": "Microsoft.Resources/deployments",
            "name": "RedisPrivateEndpoint_bcaa081e-21aa-4442-9640-21eca6a13015",
            "resources": [],
            "dependsOn": [
                "Microsoft.Cache/redis/cawaTestAddedRedis"
            ],
            "properties": {
                "mode": "Incremental",
                "parameters": {},
                "template": {
                    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                    "contentVersion": "1.0.0.0",
                    "parameters": {},
                    "variables": {},
                    "resources": [
                        {
                            "apiVersion": "2019-04-01",
                            "name": "RedisPrivateEndpoint",
                            "type": "Microsoft.Network/privateEndpoints",
                            "location": "eastus",
                            "properties": {
                                "privateLinkServiceConnections": [
                                    {
                                        "id": "/subscriptions/9de7ded6-0ad3-43e6-87b8-17d93e3ff695/resourceGroups/standardWebAppdb/providers/Microsoft.Network/privateEndpoints/privateLinkServiceConnections/RedisPrivateEndpoint_6506bb12-c51f-49e0-89e8-67189493f017",
                                        "name": "RedisPrivateEndpoint_6506bb12-c51f-49e0-89e8-67189493f017",
                                        "properties": {
                                            "privateLinkServiceId": "/subscriptions/9de7ded6-0ad3-43e6-87b8-17d93e3ff695/resourceGroups/standardWebAppdb/providers/Microsoft.Cache/Redis/cawaTestAddedRedis",
                                            "groupIds": [
                                                "redisCache"
                                            ]
                                        }
                                    }
                                ],
                                "manualPrivateLinkServiceConnections": [],
                                "subnet": {
                                    "id": "/subscriptions/9de7ded6-0ad3-43e6-87b8-17d93e3ff695/resourceGroups/standardWebAppdb/providers/Microsoft.Network/virtualNetworks/cawawebstandardVnet/subnets/cawawebstandardSubnet"
                                }
                            }
                        }
                    ],
                    "outputs": {
                        "networkInterfaceId": {
                            "value": "[reference('RedisPrivateEndpoint').networkInterfaces[0].id]",
                            "type": "string"
                        }
                    }
                },
                "expressionEvaluationOptions": {
                    "scope": "inner"
                }
            },
            "subscriptionId": "9de7ded6-0ad3-43e6-87b8-17d93e3ff695",
            "resourceGroup": "standardWebAppdb"
        },
        {
            "apiVersion": "2017-05-10",
            "type": "Microsoft.Resources/deployments",
            "name": "PrivateDns-bcaa081e21aa4442964021eca6a13016",
            "resources": [],
            "dependsOn": [],
            "properties": {
                "mode": "Incremental",
                "parameters": {},
                "template": {
                    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                    "contentVersion": "1.0.0.0",
                    "parameters": {},
                    "variables": {},
                    "resources": [
                        {
                            "type": "Microsoft.Network/privateDnsZones",
                            "apiVersion": "2020-01-01",
                            "name": "privatelink.redis.cache.windows.net",
                            "location": "global",
                            "properties": {}
                        },
                        {
                            "type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
                            "apiVersion": "2020-01-01",
                            "name": "[concat('privatelink.redis.cache.windows.net', '/', uniqueString('/subscriptions/9de7ded6-0ad3-43e6-87b8-17d93e3ff695/resourceGroups/standardWebAppdb/providers/Microsoft.Network/virtualNetworks/cawawebstandardVnet'))]",
                            "location": "global",
                            "dependsOn": [
                                "Microsoft.Network/privateDnsZones/privatelink.redis.cache.windows.net"
                            ],
                            "properties": {
                                "virtualNetwork": {
                                    "id": "/subscriptions/9de7ded6-0ad3-43e6-87b8-17d93e3ff695/resourceGroups/standardWebAppdb/providers/Microsoft.Network/virtualNetworks/cawawebstandardVnet"
                                },
                                "registrationEnabled": false
                            }
                        }
                    ],
                    "outputs": {}
                },
                "expressionEvaluationOptions": {
                    "scope": "inner"
                }
            },
            "subscriptionId": "9de7ded6-0ad3-43e6-87b8-17d93e3ff695",
            "resourceGroup": "standardWebAppdb"
        },
        {
            "apiVersion": "2017-05-10",
            "type": "Microsoft.Resources/deployments",
            "name": "PrivateDNSZoneGroup_bcaa081e-21aa-4442-9640-21eca6a13017",
            "resources": [],
            "dependsOn": [
                "PrivateDns-bcaa081e21aa4442964021eca6a13016",
                "RedisPrivateEndpoint_bcaa081e-21aa-4442-9640-21eca6a13015"
            ],
            "properties": {
                "mode": "Incremental",
                "parameters": {},
                "template": {
                    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
                    "contentVersion": "1.0.0.0",
                    "parameters": {},
                    "variables": {},
                    "resources": [
                        {
                            "apiVersion": "2020-03-01",
                            "type": "Microsoft.Network/privateEndpoints/privateDnsZoneGroups",
                            "name": "[concat('RedisPrivateEndpoint', '/', 'default')]",
                            "location": "eastus",
                            "properties": {
                                "privateDnsZoneConfigs": [
                                    {
                                        "name": "privatelink-redis-cache-windows-net",
                                        "properties": {
                                            "privateDnsZoneId": "/subscriptions/9de7ded6-0ad3-43e6-87b8-17d93e3ff695/resourceGroups/standardWebAppdb/providers/Microsoft.Network/privateDnsZones/privatelink.redis.cache.windows.net"
                                        }
                                    }
                                ]
                            }
                        }
                    ],
                    "outputs": {}
                },
                "expressionEvaluationOptions": {
                    "scope": "inner"
                }
            },
            "subscriptionId": "9de7ded6-0ad3-43e6-87b8-17d93e3ff695",
            "resourceGroup": "standardWebAppdb"
        }
    ]
}